import{W as a}from"./ProfilePage-BDG6wUC0.js";import"./QBtn-D6I3yaUk.js";import"./main-pQ6I3G1N.js";import"./QInput-DM8oeg_0.js";import"./use-id-C_AkVdpB.js";import"./use-dark-S6zrulGz.js";import"./QCardSection-CPIT1auF.js";import"./QCardActions-ByJiPUfy.js";import"./QBanner-MPl0rbuP.js";import"./QCard-BZeChXVV.js";import"./QPage-D4d3kkw3.js";import"./Avatar-CbZmXNFL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./option-sizes-DqTGbdhM.js";import"./QItemSection-Dmpw6rM8.js";import"./selection-5P79RRoD.js";import"./use-timeout-BzxByfi4.js";import"./format-DyQxkAtJ.js";import"./vue-i18n-C33Zb4Ep.js";import"./UseDetectPlatform-xxeyvYGa.js";import"./QCheckbox-DawkVwl8.js";class N extends a{constructor(){super(...arguments),this.group="CapacitorStorage"}async configure({group:t}){typeof t=="string"&&(this.group=t)}async get(t){return{value:this.impl.getItem(this.applyPrefix(t.key))}}async set(t){this.impl.setItem(this.applyPrefix(t.key),t.value)}async remove(t){this.impl.removeItem(this.applyPrefix(t.key))}async keys(){return{keys:this.rawKeys().map(e=>e.substring(this.prefix.length))}}async clear(){for(const t of this.rawKeys())this.impl.removeItem(t)}async migrate(){var t;const e=[],i=[],o="_cap_",p=Object.keys(this.impl).filter(r=>r.indexOf(o)===0);for(const r of p){const s=r.substring(o.length),m=(t=this.impl.getItem(r))!==null&&t!==void 0?t:"",{value:n}=await this.get({key:s});typeof n=="string"?i.push(s):(await this.set({key:s,value:m}),e.push(s))}return{migrated:e,existing:i}}async removeOld(){const t="_cap_",e=Object.keys(this.impl).filter(i=>i.indexOf(t)===0);for(const i of e)this.impl.removeItem(i)}get impl(){return window.localStorage}get prefix(){return this.group==="NativeStorage"?"":`${this.group}.`}rawKeys(){return Object.keys(this.impl).filter(t=>t.indexOf(this.prefix)===0)}applyPrefix(t){return this.prefix+t}}export{N as PreferencesWeb};
