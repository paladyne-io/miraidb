import{e as v,Q as g}from"./QBtn-BYTjLwlH.js";import{Q as b}from"./QInput-D9B3PbDw.js";import{Q as D}from"./QCardSection-C8YunyBd.js";import{Q as E}from"./QCardActions-BrszsZpq.js";import{Q as G}from"./QBanner-awDcTpCJ.js";import{Q as L}from"./QCard-DZyVSzLO.js";import{Q as M}from"./QPage-w4NRiHQq.js";import{a5 as R,r as o,u as $,L as w,I as l,J as d,H as a,G as U,Q as _,O as Q,N as n,K as C,a6 as H,a9 as J,a2 as K,R as T}from"./main-DDcL3aaV.js";import{A as W}from"./Avatar-DctFIpQY.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-id-Cexlofo8.js";import"./use-dark-Cw5r15Ph.js";const z={key:0,class:"profile-field q-mt-lg text-h5 text-center"},F={class:"avatar-container"},X={key:0,class:"profile-field q-mt-lg"},Y={class:"profile-field"},Z={class:"profile-field"},ee={class:"text-center q-mt-lg"},ae={__name:"ProfilePage",setup(te){const{error:y,user:x,loading:P,getSignedInUser:le,getSignedInUserProfile:k,signOut:S,updateUserProfile:q}=R(),B=K(),r=o(P),u=o(""),m=o(""),p=o(""),i=o(!0),V=o(!1),I=o(),s=o(x);$(async()=>{I.value=await k()});function h(){console.log("changed"),i.value=!1}async function N(){confirm("Are you sure you want to sign out?")&&await S()&&B.push("signin")}function A(){i.value=!1,V.value=!1}async function f(){if(console.log("updateProfile"),s.value){const c={id:x.id,username:u.value,website:m.value,avatar_url:p.value,updated_at:new Date};await q(c),console.log("Updated profile"),i.value=!0,V.value=!0}}return(c,e)=>{const O=T("router-link");return d(),w(M,{class:"flex flex-center"},{default:l(()=>[a(L,{class:"my-card q-pa-lg"},{default:l(()=>[s.value?Q("",!0):(d(),U("div",z,[e[7]||(e[7]=_(" Please ")),a(O,{to:"/signin"},{default:l(()=>e[6]||(e[6]=[_("sign in")])),_:1})])),n("form",{class:"form-widget",onSubmit:J(f,["prevent"]),onChange:e[5]||(e[5]=t=>A())},[a(D,{class:"text-center"},{default:l(()=>[n("div",F,[a(W,{path:p.value,"onUpdate:path":e[0]||(e[0]=t=>p.value=t),onUpload:f},null,8,["path"])]),s.value?(d(),U("div",X,[a(b,{outlined:"",id:"email",label:"Email",type:"text",modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.email=t),disable:"",class:"q-mb-md"},{prepend:l(()=>[a(v,{name:"email"})]),_:1},8,["modelValue"])])):Q("",!0),n("div",Y,[a(b,{outlined:"",id:"username",label:"Name",modelValue:u.value,"onUpdate:modelValue":[e[2]||(e[2]=t=>u.value=t),h],class:"q-mb-md"},{prepend:l(()=>[a(v,{name:"person"})]),_:1},8,["modelValue"])]),n("div",Z,[a(b,{outlined:"",id:"website",label:"Website",type:"url",modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),class:"q-mb-lg"},{prepend:l(()=>[a(v,{name:"language"})]),_:1},8,["modelValue"])])]),_:1}),a(E,{align:"center",class:"q-gutter-md"},{default:l(()=>[a(g,{padding:"sm md",unelevated:"",rounded:"",disabled:r.value||!s.value||i.value,type:"submit",color:"primary",onClick:e[4]||(e[4]=t=>f()),label:r.value?"Saving...":"Save Changes",loading:r.value,icon:"save"},null,8,["disabled","label","loading"]),a(g,{padding:"sm md",unelevated:"",rounded:"",onClick:N,disabled:r.value||!s.value,color:"negative",icon:"logout",label:"Sign Out"},null,8,["disabled"])]),_:1}),C(y)?(d(),w(G,{key:0,class:"bg-negative text-white q-mt-md"},{default:l(()=>[_(H(C(y)),1)]),_:1})):Q("",!0),n("div",ee,[a(g,{flat:"",rounded:"",to:"/dashboard/admin-blog",color:"primary",icon:"article",label:"Go to Blog"})])],32)]),_:1})]),_:1})}}},ge=j(ae,[["__scopeId","data-v-b7ff690a"]]);export{ge as default};
