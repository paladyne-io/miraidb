import{Q as I}from"./QBtn-D6I3yaUk.js";import{aq as x,r,w as B,H as c,E as u,L as d,ad as p,I as o,F as z,$ as C,ab as g}from"./main-pQ6I3G1N.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L=["src"],R=["disabled"],U={__name:"Avatar",props:["path","size"],emits:["upload","update:path"],setup(y,{emit:_}){const w=y,{path:n,size:t}=x(w),m=_,l=r(!1),i=r(""),s=r(),v=r(null),b=async()=>{console.log("Download avatar...");try{const{data:e,error:a}=await g.storage.from("avatars").download(n.value);if(a)throw a;i.value=URL.createObjectURL(e)}catch(e){console.error("Error downloading image: ",e.message)}},k=()=>{v.value.click()},A=async e=>{s.value=e.target.files;try{if(l.value=!0,!s.value||s.value.length===0)throw new Error("You must select an image to upload.");const a=s.value[0],E=a.name.split(".").pop(),f=`${Math.random()}.${E}`;let{error:h}=await g.storage.from("avatars").upload(f,a);if(h)throw h;m("update:path",f),m("upload")}catch(a){alert(a.message)}finally{l.value=!1}};return B(n,()=>{n.value&&b()}),(e,a)=>(c(),u(C,null,[d("div",null,[i.value?(c(),u("img",{key:0,src:i.value,alt:"Avatar",class:"circle avatar image",style:p({height:o(t)+"em",width:o(t)+"em"})},null,12,L)):(c(),u("div",{key:1,class:"avatar no-image",style:p({height:o(t)+"em",width:o(t)+"em"})},null,4))]),d("div",{style:p({width:o(t)+"em"})},[z(I,{flat:"",rounded:"",color:"primary",class:"upload-button q-mt-sm",disabled:l.value,icon:"upload",label:l.value?"Uploading ...":"Change Avatar",onClick:k},null,8,["disabled","label"]),d("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",ref_key:"fileInput",ref:v,onChange:A,disabled:l.value},null,40,R)],4)],64))}},Q=F(U,[["__scopeId","data-v-2a592a1f"]]);export{Q as A};
