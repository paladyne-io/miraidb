import{Q as I}from"./QImg-BS6Rbm4k.js";import{b as E,a as Q,Q as C}from"./QPage-ehS6sEf6.js";import{b as k,v as A,k as R}from"./QBtn-BjiMyx2X.js";import{c as U,r as y,u as j,q as D,v as N,b as F,h as M,g as O,s as B,m as T,aj as W,aa as Y,U as $,V as _,a9 as z,a5 as K,S as L,a8 as r,W as f,Y as G,ai as H}from"./main-Cp0inCMI.js";import"./use-timeout-CwAyXXX2.js";import"./private.use-form-BNh_FBiO.js";const J=U({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(u,{slots:x,emit:m}){const v=O(),i=y(null);let o=0;const s=[];function g(e){const c=typeof e=="boolean"?e:u.noErrorFocus!==!0,h=++o,V=(t,a)=>{m(`validation${t===!0?"Success":"Error"}`,a)},P=t=>{const a=t.validate();return typeof a.then=="function"?a.then(l=>({valid:l,comp:t}),l=>({valid:!1,comp:t,err:l})):Promise.resolve({valid:a,comp:t})};return(u.greedy===!0?Promise.all(s.map(P)).then(t=>t.filter(a=>a.valid!==!0)):s.reduce((t,a)=>t.then(()=>P(a).then(l=>{if(l.valid===!1)return Promise.reject(l)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return h===o&&V(!0),!0;if(h===o){const{comp:a,err:l}=t[0];if(l!==void 0&&console.error(l),V(!1,a),c===!0){const q=t.find(({comp:w})=>typeof w.focus=="function"&&A(w.$)===!1);q!==void 0&&q.comp.focus()}}return!1})}function p(){o++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function n(e){e!==void 0&&B(e);const c=o+1;g().then(h=>{c===o&&h===!0&&(u.onSubmit!==void 0?m("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function b(e){e!==void 0&&B(e),m("reset"),T(()=>{p(),u.autofocus===!0&&u.noResetFocus!==!0&&d()})}function d(){E(()=>{if(i.value===null)return;const e=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);e!=null&&e.focus({preventScroll:!0})})}j(W,{bindComponent(e){s.push(e)},unbindComponent(e){const c=s.indexOf(e);c!==-1&&s.splice(c,1)}});let S=!1;return D(()=>{S=!0}),N(()=>{S===!0&&u.autofocus===!0&&d()}),F(()=>{u.autofocus===!0&&d()}),Object.assign(v.proxy,{validate:g,resetValidation:p,submit:n,reset:b,focus:d,getValidationComponents:()=>s}),()=>M("form",{class:"q-form",ref:i,onSubmit:n,onReset:b},k(x.default))}}),X="/assets/logo-DiVbz0tV.png",Z={class:"q-pt-md full-width text-center"},ee={class:"white-bg"},te={class:"q-pt-lg text-h4"},oe={class:"signin-field"},se={class:"signin-field"},ne={class:"signin-button"},fe={__name:"SignInPage",setup(u){const{user:x,signInWithEmailAndPassword:m}=Y(),v=z(),i=y(!1),o=y(""),s=y(""),g=async()=>{if(!o.value){alert("Please enter your email address");return}if(!s.value){alert("Please enter your password");return}console.log("Signing in with email: "+o.value),await m(o.value,s.value)?v.push("profile"):alert("Couldn't sign in")};return F(async()=>{x&&(console.log("User is signed in"),v.push("blog"))}),(p,n)=>{const b=K("router-link");return L(),$(Q,{class:"flex flex-center"},{default:_(()=>[r("div",Z,[r("div",ee,[f(I,{class:"logo",width:"320px",src:X})]),r("div",te,[f(b,{to:"/blog"},{default:_(()=>n[2]||(n[2]=[G("Back to Blog")])),_:1})])]),f(J,{onSubmit:H(g,["prevent"]),class:"q-gutter-md"},{default:_(()=>[r("div",null,[n[3]||(n[3]=r("div",{class:"q-pb-lg"},[r("h3",{class:"header"},"Sign in to Comment")],-1)),r("div",oe,[f(C,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=d=>o.value=d),type:"email",label:"Your email",autocomplete:"username",required:"",class:"inputField"},null,8,["modelValue"])]),r("div",se,[f(C,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=d=>s.value=d),autocomplete:"",type:"password",label:"Password",required:"",class:"inputField"},null,8,["modelValue"])]),r("div",ne,[f(R,{type:"submit",color:"blue",label:i.value?"Loading":"Sign in",loading:i.value,disable:i.value},null,8,["label","loading","disable"])])])]),_:1})]),_:1})}}};export{fe as default};
