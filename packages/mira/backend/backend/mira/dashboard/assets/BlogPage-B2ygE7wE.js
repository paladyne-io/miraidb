import{c as U,C as J,D as M,E as R,i as W,B as G}from"./QBtn-DIoc87Ox.js";import{Q as H,a as X}from"./useSupabase-7GUBluXm.js";import{a as Y,b as Z}from"./private.use-form-D0SpCY30.js";import{b as ee}from"./format-BpxpRWoF.js";import{c as l,r as L,b as te,h as x,g as ae,J as le,a as ne,l as D,m as ue,k as w,I as T,B as ie,C as oe,F as se,q as re,u as de}from"./main-hG9iqqgt.js";import{u as ce,B as ve}from"./BlogPost-xVXbLESr.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QImg-DAjbbFlS.js";import"./use-timeout-DWybTr3f.js";import"./QCard-BqXPu3Lc.js";function p(e,y){return[!0,!1].includes(e)?e:y}const me=U({name:"QPagination",props:{...Y,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||J.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:y}){const{proxy:g}=ae(),{$q:s}=g,m=Z(e,s),u=l(()=>parseInt(e.min,10)),n=l(()=>parseInt(e.max,10)),B=l(()=>parseInt(e.maxPages,10)),k=l(()=>f.value+" / "+n.value),i=l(()=>p(e.boundaryLinks,e.input)),r=l(()=>p(e.boundaryNumbers,!e.input)),c=l(()=>p(e.directionLinks,e.input)),b=l(()=>p(e.ellipses,!e.input)),V=L(null),f=l({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=ee(t,u.value,n.value);e.modelValue!==a&&y("update:modelValue",a)}});te(()=>`${u.value}|${n.value}`,()=>{f.value=e.modelValue});const $=l(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),_=l(()=>e.gutter in M?`${M[e.gutter]}px`:e.gutter||null),I=l(()=>_.value!==null?`--q-pagination-gutter-parent:-${_.value};--q-pagination-gutter-child:${_.value}`:null),C=l(()=>{const t=[e.iconFirst||s.iconSet.pagination.first,e.iconPrev||s.iconSet.pagination.prev,e.iconNext||s.iconSet.pagination.next,e.iconLast||s.iconSet.pagination.last];return s.lang.rtl===!0?t.reverse():t}),O=l(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),E=l(()=>R(e,"flat")),j=l(()=>({[E.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),Q=l(()=>{const t={[E.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),z=l(()=>({...Q.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),P=l(()=>{let t=Math.max(B.value,1+(b.value?2:0)+(r.value?2:0));const a={pgFrom:u.value,pgTo:n.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(n.value).length)}em`}};return B.value&&t<n.value-u.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(u.value,Math.min(n.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(n.value,a.pgFrom+t-1),r.value&&(a.boundaryStart=!0,a.pgFrom++),b.value&&a.pgFrom>u.value+(r.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),r.value&&(a.boundaryEnd=!0,a.pgTo--),b.value&&a.pgTo<n.value-(r.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function N(t){f.value=t}function A(t){f.value=f.value+t}const K=l(()=>{function t(){f.value=V.value,V.value=null}return{"onUpdate:modelValue":a=>{V.value=a},onKeyup:a=>{W(a,13)===!0&&t()},onBlur:t}});function d(t,a,S){const v={"aria-label":a,"aria-current":"false",...j.value,...t};return S===!0&&Object.assign(v,{"aria-current":"true",...z.value}),a!==void 0&&(e.toFn!==void 0?v.to=e.toFn(a):v.onClick=()=>{N(a)}),x(G,v)}return Object.assign(g,{set:N,setByOffset:A}),()=>{const t=[],a=[];let S;if(i.value===!0&&(t.push(d({key:"bls",disable:e.disable||e.modelValue<=u.value,icon:C.value[0]},u.value)),a.unshift(d({key:"ble",disable:e.disable||e.modelValue>=n.value,icon:C.value[3]},n.value))),c.value===!0&&(t.push(d({key:"bdp",disable:e.disable||e.modelValue<=u.value,icon:C.value[1]},e.modelValue-1)),a.unshift(d({key:"bdn",disable:e.disable||e.modelValue>=n.value,icon:C.value[2]},e.modelValue+1))),e.input!==!0){S=[];const{pgFrom:v,pgTo:q,marginalStyle:h}=P.value;if(P.value.boundaryStart===!0){const o=u.value===e.modelValue;t.push(d({key:"bns",style:h,disable:e.disable,label:u.value},u.value,o))}if(P.value.boundaryEnd===!0){const o=n.value===e.modelValue;a.unshift(d({key:"bne",style:h,disable:e.disable,label:n.value},n.value,o))}P.value.ellipsesStart===!0&&t.push(d({key:"bes",style:h,disable:e.disable,label:"…",ripple:!1},v-1)),P.value.ellipsesEnd===!0&&a.unshift(d({key:"bee",style:h,disable:e.disable,label:"…",ripple:!1},q+1));for(let o=v;o<=q;o++)S.push(d({key:`bpg${o}`,style:h,disable:e.disable,label:o},o,o===e.modelValue))}return x("div",{class:$.value,...O.value},[x("div",{class:"q-pagination__content row no-wrap items-center",style:I.value},[...t,e.input===!0?x(H,{class:"inline",style:{width:`${k.value.length/1.5}em`},type:"number",dense:!0,value:V.value,disable:e.disable,dark:m.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:k.value,min:u.value,max:n.value,...K.value}):x("div",{class:"q-pagination__middle row justify-center"},S),...a])])}}}),be={class:"blog-grid"},fe={class:"q-pa-lg flex flex-center"},F=7,ye={__name:"BlogPage",setup(e){const y=le(),g=ce(),s=l(()=>g.posts),m=L(1),u=l(()=>{const i=(m.value-1)*F;return s.value.slice(i,i+F)}),n=l(()=>Math.ceil(s.value.length/F));ne(async()=>{console.log("BlogPage mounted"),await g.loadPosts(),console.log("loadPosts done")});function B(i){m.value=i}async function k(i){g.posts.find(c=>c.id===i)&&y.push({name:"view-post",params:{id:i}})}return(i,r)=>(w(),D(X,{class:"blog-page"},{default:ue(()=>[T("div",be,[(w(!0),ie(se,null,oe(u.value,(c,b)=>(w(),D(ve,{key:c.id,post:c,"is-hero":b===0,class:de({"hero-image":b===0}),showEditButtons:!1,onViewPost:k},null,8,["post","is-hero","class"]))),128))]),T("div",fe,[re(me,{modelValue:m.value,"onUpdate:modelValue":[r[0]||(r[0]=c=>m.value=c),B],max:n.value,class:"q-mt-md"},null,8,["modelValue","max"])])]),_:1}))}},we=ge(ye,[["__scopeId","data-v-d72217a0"]]);export{we as default};
