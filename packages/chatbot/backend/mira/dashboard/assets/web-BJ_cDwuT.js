import{W as m}from"./MainLayout-CXIJRs2g.js";import"./QLayout-DtIZbc8P.js";import"./mainRouter-D1MtaxKQ.js";import"./QBtn-Dfw2kp-I.js";import"./touch-CFDrLUdo.js";import"./use-id-DMSnSmkA.js";import"./selection-D5oQdspc.js";import"./use-timeout-CR3r1ZoW.js";import"./use-dark-0IRRmxwP.js";import"./format-DyQxkAtJ.js";import"./QItemSection-aE-WNMmb.js";import"./QExpansionItem-CJ-BsBMi.js";import"./QList-ApFJAUNp.js";import"./open-url-QyGYBfb6.js";import"./QCheckbox-CuZllEfa.js";import"./option-sizes-2YlAHtV1.js";import"./private.use-form-D5cE26cE.js";class K extends m{constructor(){super(...arguments),this.group="CapacitorStorage"}async configure({group:t}){typeof t=="string"&&(this.group=t)}async get(t){return{value:this.impl.getItem(this.applyPrefix(t.key))}}async set(t){this.impl.setItem(this.applyPrefix(t.key),t.value)}async remove(t){this.impl.removeItem(this.applyPrefix(t.key))}async keys(){return{keys:this.rawKeys().map(e=>e.substring(this.prefix.length))}}async clear(){for(const t of this.rawKeys())this.impl.removeItem(t)}async migrate(){var t;const e=[],i=[],o="_cap_",p=Object.keys(this.impl).filter(r=>r.indexOf(o)===0);for(const r of p){const s=r.substring(o.length),n=(t=this.impl.getItem(r))!==null&&t!==void 0?t:"",{value:a}=await this.get({key:s});typeof a=="string"?i.push(s):(await this.set({key:s,value:n}),e.push(s))}return{migrated:e,existing:i}}async removeOld(){const t="_cap_",e=Object.keys(this.impl).filter(i=>i.indexOf(t)===0);for(const i of e)this.impl.removeItem(i)}get impl(){return window.localStorage}get prefix(){return this.group==="NativeStorage"?"":`${this.group}.`}rawKeys(){return Object.keys(this.impl).filter(t=>t.indexOf(this.prefix)===0)}applyPrefix(t){return this.prefix+t}}export{K as PreferencesWeb};
