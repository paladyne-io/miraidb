const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-DCe5AlTk.css","assets/Avatar-CuprDblR.css"])))=>i.map(i=>d[i]);
import{e as K,Q as z}from"./QBtn-D6I3yaUk.js";import{Q as X}from"./QInput-DM8oeg_0.js";import{Q as he}from"./QCardSection-CPIT1auF.js";import{Q as we}from"./QCardActions-ByJiPUfy.js";import{Q as ye}from"./QBanner-MPl0rbuP.js";import{Q as Pe}from"./QCard-BZeChXVV.js";import{Q as ke}from"./QPage-D4d3kkw3.js";import{w as de,H as O,J as I,I as N,an as _e,a5 as Ce,r as _,u as ce,G as h,F as f,a6 as re,N as Q,a4 as ue,M as ee,a3 as Le,L as $,E as Y,a7 as xe,a0 as Ee,O as $e}from"./main-pQ6I3G1N.js";import{A as Oe}from"./Avatar-CbZmXNFL.js";import{Q as Se}from"./option-sizes-DqTGbdhM.js";import{u as Ue}from"./vue-i18n-C33Zb4Ep.js";import{a as fe,u as Ae}from"./UseDetectPlatform-xxeyvYGa.js";import{Q as je}from"./QCheckbox-DawkVwl8.js";import{b as ne,a as Ve}from"./QItemSection-Dmpw6rM8.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Qe={__name:"LanguageSwitcher",setup(a){const{t:e,locale:t}=Ue({useScope:"global"}),o=fe(),s=[{value:"en",label:"English"},{value:"ja",label:"Japanese | 日本語"},{value:"fr",label:"French"},{value:"es",label:"Spanish | Espanol"}],r=Object.assign({});return de(t,()=>{const d=t.value;try{r[`../../node_modules/quasar/lang/${d}.mjs`]().then(n=>{o.lang.set(n.default)})}catch{}}),(d,n)=>(O(),I(Se,{class:"text-subtitle1 q-ml-lg",modelValue:N(t),"onUpdate:modelValue":n[0]||(n[0]=c=>_e(t)?t.value=c:null),"popup-content-class":"text-subtitle",options:s,label:"Language",borderless:"","emit-value":"","map-options":"","options-dense":"",style:{"max-width":"100px"}},null,8,["modelValue"]))}};/*! Capacitor: https://capacitorjs.com/ - MIT License */const Ie=a=>{const e=new Map;e.set("web",{name:"web"});const t=a.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(r,d)=>{t.platforms.set(r,d)},s=r=>{t.platforms.has(r)&&(t.currentPlatform=t.platforms.get(r))};return t.addPlatform=o,t.setPlatform=s,t},Me=a=>a.CapacitorPlatforms=Ie(a),me=Me(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});me.addPlatform;me.setPlatform;var j;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(j||(j={}));class Z extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const Be=a=>{var e,t;return a!=null&&a.androidBridge?"android":!((t=(e=a==null?void 0:a.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},De=a=>{var e,t,o,s,r;const d=a.CapacitorCustomPlatform||null,n=a.Capacitor||{},c=n.Plugins=n.Plugins||{},i=a.CapacitorPlatforms,b=()=>d!==null?d.name:Be(a),w=((e=i==null?void 0:i.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||b,L=()=>w()!=="web",U=((t=i==null?void 0:i.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||L,M=l=>{const u=V.get(l);return!!(u!=null&&u.platforms.has(w())||B(l))},H=((o=i==null?void 0:i.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||M,y=l=>{var u;return(u=n.PluginHeaders)===null||u===void 0?void 0:u.find(m=>m.name===l)},B=((s=i==null?void 0:i.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||y,W=l=>a.console.error(l),F=(l,u,m)=>Promise.reject(`${m} does not have an implementation of "${u}".`),V=new Map,q=(l,u={})=>{const m=V.get(l);if(m)return console.warn(`Capacitor plugin "${l}" already registered. Cannot register plugins twice.`),m.proxy;const S=w(),A=B(l);let C;const ve=async()=>(!C&&S in u?C=typeof u[S]=="function"?C=await u[S]():C=u[S]:d!==null&&!C&&"web"in u&&(C=typeof u.web=="function"?C=await u.web():C=u.web),C),pe=(g,p)=>{var k,x;if(A){const E=A==null?void 0:A.methods.find(P=>p===P.name);if(E)return E.rtype==="promise"?P=>n.nativePromise(l,p.toString(),P):(P,D)=>n.nativeCallback(l,p.toString(),P,D);if(g)return(k=g[p])===null||k===void 0?void 0:k.bind(g)}else{if(g)return(x=g[p])===null||x===void 0?void 0:x.bind(g);throw new Z(`"${l}" plugin is not implemented on ${S}`,j.Unimplemented)}},G=g=>{let p;const k=(...x)=>{const E=ve().then(P=>{const D=pe(P,g);if(D){const T=D(...x);return p=T==null?void 0:T.remove,T}else throw new Z(`"${l}.${g}()" is not implemented on ${S}`,j.Unimplemented)});return g==="addListener"&&(E.remove=async()=>p()),E};return k.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:g,writable:!1,configurable:!1}),k},ae=G("addListener"),se=G("removeListener"),be=(g,p)=>{const k=ae({eventName:g},p),x=async()=>{const P=await k;se({eventName:g,callbackId:P},p)},E=new Promise(P=>k.then(()=>P({remove:x})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await x()},E},J=new Proxy({},{get(g,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?be:ae;case"removeListener":return se;default:return G(p)}}});return c[l]=J,V.set(l,{name:l,proxy:J,platforms:new Set([...Object.keys(u),...A?[S]:[]])}),J},v=((r=i==null?void 0:i.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||q;return n.convertFileSrc||(n.convertFileSrc=l=>l),n.getPlatform=w,n.handleError=W,n.isNativePlatform=U,n.isPluginAvailable=H,n.pluginMethodNoop=F,n.registerPlugin=v,n.Exception=Z,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n.platform=n.getPlatform(),n.isNative=n.isNativePlatform(),n},Te=a=>a.Capacitor=De(a),R=Te(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),te=R.registerPlugin;R.Plugins;class ge{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),o&&this.sendRetainedArgumentsForEvent(e);const d=async()=>this.removeListener(e,t);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,o){const s=this.listeners[e];if(!s){if(o){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}s.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new R.Exception(e,j.Unimplemented)}unavailable(e="not available"){return new R.Exception(e,j.Unavailable)}async removeListener(e,t){const o=this.listeners[e];if(!o)return;const s=o.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(o=>{this.notifyListeners(e,o)}))}}const oe=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),le=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Re extends ge{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[s,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=le(s).trim(),r=le(r).trim(),t[s]=r}),t}async setCookie(e){try{const t=oe(e.key),o=oe(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),d=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${s}; path=${r}; ${d};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}te("CapacitorCookies",{web:()=>new Re});const He=async a=>new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{const s=o.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},o.onerror=s=>t(s),o.readAsDataURL(a)}),We=(a={})=>{const e=Object.keys(a);return Object.keys(a).map(s=>s.toLocaleLowerCase()).reduce((s,r,d)=>(s[r]=a[e[d]],s),{})},Fe=(a,e=!0)=>a?Object.entries(a).reduce((o,s)=>{const[r,d]=s;let n,c;return Array.isArray(d)?(c="",d.forEach(i=>{n=e?encodeURIComponent(i):i,c+=`${r}=${n}&`}),c.slice(0,-1)):(n=e?encodeURIComponent(d):d,c=`${r}=${n}`),`${o}&${c}`},"").substr(1):null,Ge=(a,e={})=>{const t=Object.assign({method:a.method||"GET",headers:a.headers},e),s=We(a.headers)["content-type"]||"";if(typeof a.data=="string")t.body=a.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[d,n]of Object.entries(a.data||{}))r.set(d,n);t.body=r.toString()}else if(s.includes("multipart/form-data")||a.data instanceof FormData){const r=new FormData;if(a.data instanceof FormData)a.data.forEach((n,c)=>{r.append(c,n)});else for(const n of Object.keys(a.data))r.append(n,a.data[n]);t.body=r;const d=new Headers(t.headers);d.delete("content-type"),t.headers=d}else(s.includes("application/json")||typeof a.data=="object")&&(t.body=JSON.stringify(a.data));return t};class Je extends ge{async request(e){const t=Ge(e,e.webFetchExtra),o=Fe(e.params,e.shouldEncodeUrlParams),s=o?`${e.url}?${o}`:e.url,r=await fetch(s,t),d=r.headers.get("content-type")||"";let{responseType:n="text"}=r.ok?e:{};d.includes("application/json")&&(n="json");let c,i;switch(n){case"arraybuffer":case"blob":i=await r.blob(),c=await He(i);break;case"json":c=await r.json();break;case"document":case"text":default:c=await r.text()}const b={};return r.headers.forEach((w,L)=>{b[L]=w}),{data:c,headers:b,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}te("CapacitorHttp",{web:()=>new Je});const ie=te("Preferences",{web:()=>Ce(()=>import("./web-Bt6qYD_q.js"),__vite__mapDeps([0,1])).then(a=>new a.PreferencesWeb)}),Ke={__name:"DarkModeSwitcher",props:{avatar:Boolean,showLabel:{type:Boolean,default:!1},noPadding:{type:Boolean,default:!1},ignoreDarkMode:{type:Boolean,default:!1}},setup(a){const e=a,t=fe(),o=_(t.dark),s=_(o.value),{isDesktop:r}=Ae(),d=async()=>{const{value:c}=await ie.get({key:"darkmode"});if(!c){r.value?s.value=!1:s.value=!0,n(JSON.stringify(s.value));return}s.value=c==="true"},n=async c=>{await ie.set({key:"darkmode",value:c})};return de(s,()=>{const c=JSON.stringify(s.value);t.dark.set(s.value),n(c)}),ce(()=>{d()}),(c,i)=>(O(),I(Ve,{clickable:"",class:re(a.noPadding?"q-px-none":""),onClick:i[1]||(i[1]=b=>s.value=!s.value)},{default:h(()=>[f(ne,{avatar:a.avatar},{default:h(()=>[f(je,{class:re(a.ignoreDarkMode?"checkbox":" darkmode-checkbox"),modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=b=>s.value=b),"checked-icon":"fas fa-circle-half-stroke","unchecked-icon":"fas fa-circle-half-stroke"},null,8,["class","modelValue"])]),_:1},8,["avatar"]),e.showLabel?(O(),I(ne,{key:0},{default:h(()=>[Q(ue(s.value?c.$t("lightmode"):c.$t("darkmode")),1)]),_:1})):ee("",!0)]),_:1},8,["class"]))}},ze={class:"row justify-between"},Xe={class:"col-5"},Ye={class:"col-5"},Ze={key:0,class:"profile-field q-mt-lg text-h5 text-center"},Ne={key:1},et={class:"avatar-container"},tt={key:0,class:"profile-field q-mt-lg"},at={class:"profile-field"},st={class:"profile-field"},rt={class:"text-center q-mt-lg"},nt={__name:"ProfilePage",setup(a){const{error:e,user:t,loading:o,getSignedInUser:s,getSignedInUserProfile:r,signOut:d,updateUserProfile:n}=Le(),c=Ee(),i=_(o),b=_(""),w=_(""),L=_(""),U=_(!0),M=_(!1),H=_(),y=_(t);ce(async()=>{console.log("getting profile: "+i.value),await V()});function B(){console.log("changed"),U.value=!1}async function W(){confirm("Are you sure you want to sign out?")&&await d()&&c.push("signin")}function F(){U.value=!1,M.value=!1}async function V(){try{if(i.value=!0,t||(y.value=await s()),!t||!y.value)return;console.log("get user Profile");const v=await r();H.value=v,v&&(b.value=v.username,w.value=v.website,L.value=v.avatar_url)}catch(v){v.value=v.message}finally{i.value=!1}}async function q(){if(console.log("updateProfile"),y.value){const v={id:t.id,username:b.value,website:w.value,avatar_url:L.value,updated_at:new Date};await n(v),console.log("Updated profile"),U.value=!0,M.value=!0}}return(v,l)=>{const u=$e("router-link");return O(),I(ke,{class:"flex flex-center"},{default:h(()=>[f(Pe,{class:"my-card q-pa-lg"},{default:h(()=>[$("div",ze,[$("div",Xe,[f(Ke,{class:"outlined-btn","ignore-dark-mode":!0,avatar:!0,noPadding:!0,showLabel:!0,key:"darkmode"})]),$("div",Ye,[f(Qe,{style:{"min-width":"280px","max-width":"300px"}})])]),y.value?(O(),Y("div",Ne,[$("form",{class:"form-widget",onSubmit:xe(q,["prevent"]),onChange:l[5]||(l[5]=m=>F())},[f(he,{class:"text-center"},{default:h(()=>[$("div",et,[f(Oe,{path:L.value,"onUpdate:path":l[0]||(l[0]=m=>L.value=m),onUpload:q},null,8,["path"])]),y.value?(O(),Y("div",tt,[f(X,{outlined:"",id:"email",label:"Email",type:"text",modelValue:y.value.email,"onUpdate:modelValue":l[1]||(l[1]=m=>y.value.email=m),disable:"",class:"q-mb-md"},{prepend:h(()=>[f(K,{name:"email"})]),_:1},8,["modelValue"])])):ee("",!0),$("div",at,[f(X,{outlined:"",id:"username",label:"Name",modelValue:b.value,"onUpdate:modelValue":[l[2]||(l[2]=m=>b.value=m),B],class:"q-mb-md"},{prepend:h(()=>[f(K,{name:"person"})]),_:1},8,["modelValue"])]),$("div",st,[f(X,{outlined:"",id:"website",label:"Website",type:"url",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=m=>w.value=m),class:"q-mb-lg"},{prepend:h(()=>[f(K,{name:"language"})]),_:1},8,["modelValue"])])]),_:1}),f(we,{align:"center",class:"q-gutter-md"},{default:h(()=>[f(z,{class:"mira-button",padding:"sm md",unelevated:"",disabled:i.value||!y.value||U.value,type:"submit",color:"primary",onClick:l[4]||(l[4]=m=>q()),label:i.value?"Saving...":"Save Changes",loading:i.value,icon:"save"},null,8,["disabled","label","loading"]),f(z,{padding:"sm md",unelevated:"",class:"mira-button",onClick:W,disabled:i.value||!y.value,color:"negative",icon:"logout",label:"Sign Out"},null,8,["disabled"])]),_:1}),N(e)?(O(),I(ye,{key:0,class:"bg-negative text-white q-mt-md"},{default:h(()=>[Q(ue(N(e)),1)]),_:1})):ee("",!0),$("div",rt,[f(z,{flat:"",rounded:"",to:"/dashboard/admin-blog",color:"primary",icon:"article",label:"Go to Blog"})])],32)])):(O(),Y("div",Ze,[l[7]||(l[7]=Q(" Please ")),f(u,{to:"/dashboard/admin-signin"},{default:h(()=>l[6]||(l[6]=[Q("sign in")])),_:1}),l[8]||(l[8]=Q(" to edit your profile and publish and edit blog posts. "))]))]),_:1})]),_:1})}}},ot=qe(nt,[["__scopeId","data-v-11edae38"]]),kt=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"}));export{kt as P,ge as W};
